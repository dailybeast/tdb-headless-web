{"openapi":"3.1.0","info":{"version":"1.0.0","title":"OpenAPI"},"components":{"schemas":{},"parameters":{}},"paths":{"/stories":{"get":{"tags":["Content"],"summary":"Get a single story by id or canonical_url","operationId":"get_StoryFetch","parameters":[{"schema":{"type":"string","description":"Story id"},"required":false,"description":"Story id","name":"id","in":"query"},{"schema":{"type":"string","description":"Story canonical URL"},"required":false,"description":"Story canonical URL","name":"canonical_url","in":"query"},{"schema":{"type":"string","description":"Comma-separated list of content fields to include (e.g. 'canonical_url,headlines.web')"},"required":false,"description":"Comma-separated list of content fields to include (e.g. 'canonical_url,headlines.web')","name":"fields","in":"query"}],"responses":{"200":{"description":"Returns a single story if found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"content":{"type":"object","additionalProperties":{}},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","content","created_at","updated_at"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing both id and canonical_url","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[400]}},"required":["success","error","status"]}}}},"404":{"description":"Story not found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[404]}},"required":["success","error","status"]}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[500]}},"required":["success","error","status"]}}}}}}},"/stories/list":{"get":{"tags":["Content"],"summary":"List stories with filtering options","operationId":"get_StoryList","parameters":[{"schema":{"type":"string","description":"Comma-separated list of section IDs to include"},"required":false,"description":"Comma-separated list of section IDs to include","name":"section_includes","in":"query"},{"schema":{"type":"string","description":"Comma-separated list of section IDs to exclude"},"required":false,"description":"Comma-separated list of section IDs to exclude","name":"section_excludes","in":"query"},{"schema":{"type":"string","description":"Author slug to filter by"},"required":false,"description":"Author slug to filter by","name":"author_slug","in":"query"},{"schema":{"type":"string","description":"Tag slug to filter by"},"required":false,"description":"Tag slug to filter by","name":"tag_slug","in":"query"},{"schema":{"type":"string","default":"0","description":"Number of items to skip"},"required":false,"description":"Number of items to skip","name":"offset","in":"query"},{"schema":{"type":"string","default":"10","description":"Maximum number of items to return"},"required":false,"description":"Maximum number of items to return","name":"limit","in":"query"},{"schema":{"type":"string","default":"display_date","description":"Field to sort by"},"required":false,"description":"Field to sort by","name":"sort_field","in":"query"},{"schema":{"type":"string","default":"desc","description":"Sort direction (asc or desc)"},"required":false,"description":"Sort direction (asc or desc)","name":"sort_direction","in":"query"},{"schema":{"type":"string","description":"Comma-separated list of content fields to include (e.g. 'canonical_url,headlines.web')"},"required":false,"description":"Comma-separated list of content fields to include (e.g. 'canonical_url,headlines.web')","name":"fields","in":"query"}],"responses":{"200":{"description":"Returns a list of stories","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"stories":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"content":{"type":"object","additionalProperties":{}},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","content","created_at","updated_at"]}}},"required":["stories"]}},"required":["success","result"]}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[400]}},"required":["success","error","status"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[500]}},"required":["success","error","status"]}}}}}}},"/stories/{id}/refresh":{"post":{"tags":["Content"],"summary":"Refresh a story from Arc Content API to the database","operationId":"post_StoryRefresh","parameters":[{"schema":{"type":"string","description":"Story ID to refresh"},"required":true,"description":"Story ID to refresh","name":"id","in":"path"},{"schema":{"type":"boolean","description":"Whether to fetch the last published version of the story. Will fetch the last draft when false."},"required":false,"description":"Whether to fetch the last published version of the story. Will fetch the last draft when false.","name":"published","in":"query"}],"responses":{"200":{"description":"Story successfully refreshed","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string"},"relatedCollections":{"type":"number"}},"required":["id","action"]}},"required":["success","result"]}}}},"404":{"description":"Story not found in Arc Content API","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/collections":{"get":{"tags":["Content"],"summary":"Get a single collection by id or content_alias","operationId":"get_CollectionFetch","parameters":[{"schema":{"type":"string","description":"Collection id"},"required":false,"description":"Collection id","name":"id","in":"query"},{"schema":{"type":"string","description":"Collection content alias"},"required":false,"description":"Collection content alias","name":"content_alias","in":"query"},{"schema":{"type":"string","description":"Comma-separated list of content fields to include for each content item (e.g. 'canonical_url,headlines.web')"},"required":false,"description":"Comma-separated list of content fields to include for each content item (e.g. 'canonical_url,headlines.web')","name":"fields","in":"query"}],"responses":{"200":{"description":"Returns a single collection if found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"content":{"type":"object","additionalProperties":{}},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","content","created_at","updated_at"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing both id and content_alias","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[400]}},"required":["success","error","status"]}}}},"404":{"description":"Collection not found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[404]}},"required":["success","error","status"]}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[500]}},"required":["success","error","status"]}}}}}}},"/collections/list":{"get":{"tags":["Content"],"summary":"List collections with filtering options","operationId":"get_CollectionList","parameters":[{"schema":{"type":"string","description":"Collection alias to filter by"},"required":false,"description":"Collection alias to filter by","name":"content_alias","in":"query"},{"schema":{"type":"string","description":"Content ID to filter by. Only collections that include content with this ID will be returned."},"required":false,"description":"Content ID to filter by. Only collections that include content with this ID will be returned.","name":"content_id","in":"query"},{"schema":{"type":"string","default":"0","description":"Number of items to skip"},"required":false,"description":"Number of items to skip","name":"offset","in":"query"},{"schema":{"type":"string","default":"10","description":"Maximum number of items to return"},"required":false,"description":"Maximum number of items to return","name":"limit","in":"query"},{"schema":{"type":"string","default":"updated_at","description":"Field to sort by"},"required":false,"description":"Field to sort by","name":"sort_field","in":"query"},{"schema":{"type":"string","default":"desc","description":"Sort direction (asc or desc)"},"required":false,"description":"Sort direction (asc or desc)","name":"sort_direction","in":"query"}],"responses":{"200":{"description":"Returns a list of collections","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"collections":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"content":{"type":"object","additionalProperties":{}},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","content","created_at","updated_at"]}}},"required":["collections"]}},"required":["success","result"]}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[400]}},"required":["success","error","status"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[500]}},"required":["success","error","status"]}}}}}}},"/collections/{id}/refresh":{"post":{"tags":["Content"],"summary":"Refresh a collection from Arc Content API to the database","operationId":"post_CollectionRefresh","parameters":[{"schema":{"type":"string","description":"Collection ID to refresh"},"required":true,"description":"Collection ID to refresh","name":"id","in":"path"}],"responses":{"200":{"description":"Collection successfully refreshed","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string"},"queued":{"type":"boolean","description":"Whether the collection was queued for further refreshing"}},"required":["id","action","queued"]}},"required":["success","result"]}}}},"404":{"description":"Collection not found in Arc Content API","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/sections":{"get":{"tags":["sections"],"summary":"Fetch a section by ID","operationId":"get_SectionFetch","parameters":[{"schema":{"type":"string","description":"Section ID"},"required":true,"description":"Section ID","name":"id","in":"query"},{"schema":{"type":"string","description":"Comma-separated list of fields to include in the response"},"required":false,"description":"Comma-separated list of fields to include in the response","name":"fields","in":"query"}],"responses":{"200":{"description":"Section found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"content":{},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","created_at","updated_at"]}},"required":["success","result"]}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[400]}},"required":["success","error","status"]}}}},"404":{"description":"Section not found","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[404]}},"required":["success","error","status"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[500]}},"required":["success","error","status"]}}}}}}},"/webhooks/stories":{"post":{"tags":["Webhooks"],"summary":"Queues a job to refresh a story from Arc Content API to the database","operationId":"post_StorySave","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"body":{"type":"object","properties":{"_id":{"type":"string"}},"required":["_id"],"description":"Story data from Arc Content API"}},"required":["body"]}}}},"responses":{"200":{"description":"Story successfully queued for refresh","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string","enum":["queued"]}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/webhooks/stories/{id}":{"delete":{"tags":["Webhooks"],"summary":"Delete a story from the database by ID","operationId":"delete_StoryDelete","parameters":[{"schema":{"type":"string","description":"Story ID to delete"},"required":true,"description":"Story ID to delete","name":"id","in":"path"}],"responses":{"200":{"description":"Story successfully deleted","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string","enum":["deleted"]}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"404":{"description":"Story not found in database","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/webhooks/collections":{"post":{"tags":["Webhooks"],"summary":"Queues a job to refresh a collection from Arc Content API to the database","operationId":"post_CollectionSave","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"body":{"type":"object","properties":{"_id":{"type":"string"}},"required":["_id"],"description":"Collection data from Arc Content API"}},"required":["body"]}}}},"responses":{"200":{"description":"Collection successfully saved or updated","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string","enum":["queued"]}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/webhooks/collections/{id}":{"delete":{"tags":["Webhooks"],"summary":"Delete a collection from the database by ID","operationId":"delete_CollectionDelete","parameters":[{"schema":{"type":"string","description":"Collection ID to delete"},"required":true,"description":"Collection ID to delete","name":"id","in":"path"}],"responses":{"200":{"description":"Collection successfully deleted","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string","enum":["deleted"]}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"404":{"description":"Collection not found in database","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/webhooks/authors":{"post":{"tags":["Webhooks"],"summary":"Queues jobs to refresh all stories by an author from Arc Content API to the database","operationId":"post_AuthorSave","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"body":{"type":"object","properties":{"slug":{"type":"string"}},"required":["slug"],"description":"Author data from Arc API"}},"required":["body"]}}}},"responses":{"200":{"description":"Stories by author successfully queued for refresh","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string"},"affectedStories":{"type":"string"}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/webhooks/images":{"post":{"tags":["Webhooks"],"summary":"Queues jobs to refresh all stories/collections containing an image from Arc Content API to the database","operationId":"post_ImageSave","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"body":{"type":"object","properties":{"_id":{"type":"string"}},"required":["_id"],"description":"Image data from Arc API"}},"required":["body"]}}}},"responses":{"200":{"description":"Jobs successfully queued","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string"},"storiesUpdated":{"type":"number"},"collectionsUpdated":{"type":"number"}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/webhooks/sections":{"post":{"tags":["Webhooks"],"summary":"Saves a section to the database from Arc Content API","operationId":"post_SectionSave","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"body":{"type":"object","properties":{"_id":{"type":"string"}},"required":["_id"],"description":"Section data from Arc Content API"}},"required":["body"]}}}},"responses":{"200":{"description":"Section successfully saved to database","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string","enum":["created","updated"]}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[400]}},"required":["success","error","status"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[500]}},"required":["success","error","status"]}}}}}}},"/webhooks/sections/{id}":{"delete":{"tags":["Webhooks"],"summary":"Delete a section from the database by ID","operationId":"delete_SectionDelete","parameters":[{"schema":{"type":"string","description":"Section ID to delete"},"required":true,"description":"Section ID to delete","name":"id","in":"path"}],"responses":{"200":{"description":"Section successfully deleted","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"result":{"type":"object","properties":{"id":{"type":"string"},"action":{"type":"string","enum":["deleted"]}},"required":["id","action"]}},"required":["success","result"]}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[400]}},"required":["success","error","status"]}}}},"404":{"description":"Section not found in database","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[404]}},"required":["success","error","status"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"},"status":{"type":"number","enum":[500]}},"required":["success","error","status"]}}}}}}}},"webhooks":{}}